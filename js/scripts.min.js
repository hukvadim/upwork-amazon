// Не викликає скріпт декілька раз
let waitForFinalEvent = (function() {
	let timers = {};
	return function(callback, ms, uniqueId) {
		if (!uniqueId)
			uniqueId = "Не викликає двічі без унікального ідентифікатору";

		if (timers[uniqueId])
			clearTimeout(timers[uniqueId]);

		timers[uniqueId] = setTimeout(callback, ms);
	};
})();


// Search common issues
$("#search-input").on("keyup keydown change submit click", function() {

	var search = $(this).val().toLowerCase();

	// Call the code with a delay
	waitForFinalEvent(function(){
		
		let showEmpty = true;

		$("#common-issue .js-list-item").each(function() {
			let el     = $(this);
			let elText = el.text().trim().toLowerCase().indexOf(search);

			if (elText != '-1') {
				showEmpty = false;
				el.show();
			} else {
				el.hide();
			}
		});

		if (showEmpty)
			$("#common-issue #common-issue-empty").show();
		else
			$("#common-issue #common-issue-empty").hide();

	}, 400);
});



/**
 * Change the menu when scrolling down
 */
var min = false // From the beginning the cap is in normal mode
	, minHeith = 50 // Height in px after which you need to change the menu
	, menu = $("#to-top") // The ID of the menu that you want to track and change
	, addClassName = "toggle-fixed-navbar" // The class you want to add
	, supportPageOffset = window.scrollY !== undefined;

$(document).scroll(function() {

	minHeith = ($(window).width() <= 480) ? 520 : 50;

	var scrollTop = $(document).scrollTop();

	if (scrollTop > minHeith && !min) {
		menu.addClass(addClassName);
		min = true;
	}
	if (scrollTop <= minHeith && min) {
		menu.removeClass(addClassName);
		min = false;
	}
});

// Запускаємо функцію змінити меню при загрузці сторінки
if (supportPageOffset > 0) {
	
	minHeith = ($(window).width() <= 480) ? 520 : 50;

	if ($(document).scrollTop() > minHeith && !min) {
		menu.addClass(addClassName);
		min = true;
	}

	if ($(document).scrollTop() <= minHeith && min) {
		menu.removeClass(addClassName);
		min = false;
	}
}





